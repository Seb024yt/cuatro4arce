<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Panel | Operaciones</title>
  <meta name="description" content="Dashboard operacional: KPIs, actividad y transacciones recientes." />

  <!-- Tipografía (opcional). Si no quieres depender de Google Fonts, elimina estas líneas -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #0b1020;
      --bg2:#0a1633;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.09);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --line: rgba(255,255,255,.12);
      --brand: #7c5cff;
      --brand2:#35d0ff;
      --good:#2ee59d;
      --warn:#ffd166;
      --bad:#ff5c7a;
      --shadow: 0 18px 60px rgba(0,0,0,.35);
      --r-xl: 22px;
      --r-lg: 18px;
      --r-md: 14px;
      --r-sm: 12px;
      --gap: 18px;
      --max: 1380px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    html{
      background:
        radial-gradient(900px 480px at 10% 10%, rgba(124,92,255,.32), transparent 55%),
        radial-gradient(900px 480px at 90% 20%, rgba(53,208,255,.24), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      background-attachment: fixed;
    }
    body{
      margin:0;
      font-family: "Plus Jakarta Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size: 180%;
      color: var(--text);
      background: transparent;
      overflow-x: hidden;
    }

    /* Accesibilidad */
    :focus-visible{
      outline: 3px solid rgba(53,208,255,.6);
      outline-offset: 3px;
      border-radius: 10px;
    }

    /* Main */
    .main{
      padding: 18px 12px 32px;
    }
    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      display:flex;
      flex-direction:column;
      gap: var(--gap);
    }
    .section-sep{
      height: 1px;
      background: var(--line);
      margin: 8px 0 6px;
      width: 100%;
      grid-column: 1 / -1;
    }
    .reveal{
      opacity: 0;
      transform: translateY(12px);
      transition: opacity .5s ease, transform .5s ease;
      will-change: opacity, transform;
    }
    .reveal.is-visible{
      opacity: 1;
      transform: translateY(0);
    }

    /* Topbar */
    .topbar{
      display:flex;
      gap: 12px;
      align-items:center;
      justify-content: space-between;
      padding: 14px 14px;
      border-radius: var(--r-xl);
      border: 1px solid var(--line);
      background: rgba(255,255,255,.05);
      backdrop-filter: blur(10px);
    }
    .topbar .left{
      display:flex;
      flex-direction:column;
      gap: 2px;
      padding-left: 4px;
    }
    .topbar .left .title{
      font-size: 15px;
      font-weight: 700;
      margin: 0;
    }
    .topbar .left .subtitle{
      margin:0;
      font-size: 12px;
      color: var(--muted);
    }

    .actions{
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .search{
      position: relative;
      width: min(360px, 44vw);
    }
    .search input{
      width: 100%;
      padding: 12px 12px 12px 38px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
      color: var(--text);
      outline: none;
    }
    .search svg{
      position:absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px; height:16px;
      opacity: .75;
    }
    .btn{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.16);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      cursor: pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .btn:hover{
      background: rgba(255,255,255,.06);
      border-color: rgba(255,255,255,.16);
      transform: translateY(-1px);
    }
    .btn.primary{
      border-color: rgba(124,92,255,.35);
      background: linear-gradient(135deg, rgba(124,92,255,.22), rgba(53,208,255,.12));
    }

    /* KPI Grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: var(--gap);
    }
    .card{
      border: 1px solid var(--line);
      background: var(--card);
      border-radius: var(--r-xl);
      padding: 16px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      min-height: 120px;
    }
    .kpi{
      grid-column: span 3;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .kpi .row{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
    }
    .kpi .label{
      font-size: 12px;
      color: var(--muted);
      margin:0;
    }
    .kpi .value{
      margin:0;
      font-size: 22px;
      font-weight: 800;
      letter-spacing: .2px;
    }
    .chip{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      color: var(--muted);
      background: rgba(0,0,0,.12);
      white-space: nowrap;
    }
    .bar{
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
    }
    .bar > span{
      display:block;
      height: 100%;
      width: var(--w, 55%);
      background: linear-gradient(90deg, rgba(124,92,255,.9), rgba(53,208,255,.85));
      border-radius: 999px;
    }

    /* Table carousel (top area) */
    .table-carousel{
      grid-column: span 12;
      position: relative;
      min-height: 0;
      padding-right: 140px;
      display: grid;
      align-items: start;
    }
    .table-card{
      position: relative;
      grid-area: 1 / 1;
      transition: opacity .25s ease, filter .25s ease, transform .25s ease;
    }
    .table-card.left{
      left: 0;
      width: min(760px, 100%);
    }
    .table-card.right{
      width: min(560px, 86%);
      justify-self: end;
      margin-right: -106px;
    }
    .table-card.is-front{
      z-index: 2;
      opacity: 1;
      filter: none;
      transform: scale(1);
      align-self: center;
    }
    .table-card.is-back{
      z-index: 1;
      opacity: .55;
      filter: blur(1.7px);
      transform: scale(.92);
      cursor: pointer;
      align-self: center;
    }
    .table-card.is-back:hover{
      opacity: .7;
      filter: blur(1.2px);
    }
    .swap-hint{
      position: absolute;
      top: 12px;
      right: 12px;
      padding: 6px 10px;
      font-size: 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.38);
      color: var(--text);
    }
    .table-card.is-front .swap-hint{
      display: none;
    }
    .table-caption{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .table-caption h2{
      margin: 0;
      font-size: 14px;
      letter-spacing: .2px;
    }
    .summary-total{
      margin-top: 12px;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
    }
    .summary-total .label{
      font-size: 12px;
      color: var(--muted);
      margin: 0;
    }
    .summary-total .amount{
      font-size: 18px;
      font-weight: 800;
      margin: 0;
    }
    .pay-btn{
      border-radius: 999px;
      padding: 8px 14px;
      font-size: 12px;
    }

    /* Wide cards */
    .wide{
      grid-column: span 7;
      min-height: 300px;
    }
    .sidewide{
      grid-column: span 5;
      min-height: 300px;
    }

    .card h2{
      margin: 0 0 10px;
      font-size: 14px;
      letter-spacing: .2px;
    }
    .muted{ color: var(--muted); }

    /* Table */
    .table{
      width: 100%;
      border-collapse: collapse;
      overflow:hidden;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
    }
    .table th, .table td{
      padding: 12px 12px;
      font-size: 13px;
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    .table th{
      text-align:left;
      color: rgba(255,255,255,.82);
      background: rgba(0,0,0,.14);
      font-weight: 700;
    }
    .table tr:hover td{
      background: rgba(255,255,255,.04);
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.14);
      font-size: 12px;
      color: var(--muted);
    }
    .pill .s{
      width: 8px; height: 8px; border-radius: 50%;
      background: var(--good);
    }
    .pill.warn .s{ background: var(--warn); }
    .pill.bad .s{ background: var(--bad); }

    /* Activity */
    .activity{
      display:flex;
      flex-direction:column;
      gap: 10px;
      margin-top: 10px;
    }
    .item{
      display:flex;
      gap: 12px;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.10);
    }
    .avatar{
      width: 34px; height: 34px;
      border-radius: 14px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.12);
      display:grid;
      place-items:center;
      font-weight: 800;
      color: rgba(255,255,255,.86);
    }
    .item .txt{
      display:flex;
      flex-direction:column;
      gap: 2px;
      min-width: 0;
    }
    .item .txt b{ font-size: 13px; }
    .item .txt span{ font-size: 12px; color: var(--muted); }
    .item .time{
      margin-left: auto;
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
      padding-left: 10px;
    }

    @media (max-width: 980px){
      .main{ padding-top: 16px; }
      .search{ width: 54vw; }
      .kpi{ grid-column: span 6; }
      .table-carousel{
        min-height: auto;
        padding-right: 0;
      }
      .table-card{
        position: static;
        transform: none;
        filter: none;
        opacity: 1;
        width: 100%;
        transition: none;
      }
      .table-card.is-back{
        margin-top: 12px;
        cursor: default;
      }
      .swap-hint{ display: none; }
      .wide{ grid-column: span 12; }
      .sidewide{ grid-column: span 12; }
    }

    @media (max-width: 560px){
      .topbar{ flex-direction:column; align-items:stretch; }
      .actions{ justify-content: space-between; }
      .search{ width: 100%; }
      .kpi{ grid-column: span 12; }
    }
  </style>
</head>

<body>
  <main class="main">
    <div class="wrap">

        <header class="topbar" role="banner">
          <div class="left">
            <p class="title">Seguimiento</p>
            <p class="subtitle">operaciones y trazabilidad de movimientos</p>
          </div>

          <div class="actions">
            <div class="search" role="search">
              <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="1.6"/>
                <path d="M16.5 16.5 21 21" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
              <input id="q" type="search" placeholder="Buscar transacción, cliente, folio…" autocomplete="off" />
            </div>
            <button class="btn" type="button" id="themeBtn">Buscar</button>
            <button class="btn primary" type="button">Nuevo registro</button>
          </div>
        </header>

        <div class="section-sep" role="separator" aria-hidden="true"></div>

        <!-- KPI CARDS -->
        <section class="grid" aria-label="Indicadores clave">
          <!-- Table carousel -->
          <section class="table-carousel" id="tableCarousel" aria-label="Resumen por tablas">
            <article class="card table-card left is-front" id="tableFront">
              <span class="swap-hint">Click para ver</span>
              <div class="table-caption">
                <h2>Resumen de ingresos <span class="muted"> - Resumen F29</span></h2>
                <span class="chip">Enero</span>
              </div>
              <table class="table" aria-describedby="tablaResumen">
                <caption id="tablaResumen" class="muted" style="caption-side: bottom; padding: 10px 4px 0; font-size: 12px;">
                  Datos de ejemplo para la vista tipo carrusel.
                </caption>
                <thead>
                  <tr>
                    <th>Cuenta</th>
                    <th>Monto</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>IVA Debito</td>
                    <td>$ 514.204</td>
                  </tr>
                  <tr>
                    <td>IVA Credito</td>
                    <td>-$ 347.266</td>
                  </tr>
                  <tr>
                    <td>PPM</td>
                    <td>$ 32.205</td>
                  </tr>
                  <tr>
                    <td>Impuesto Unico</td>
                    <td>$ 25.000</td>
                  </tr>
                  <tr>
                    <td>Retencion 2da Categoria</td>
                    <td>$ 15.000</td>
                  </tr>
                </tbody>
              </table>
              <div class="summary-total" aria-label="Impuesto a pagar del mes">
                <div>
                  <p class="label">Impuesto a pagar</p>
                  <p class="amount">$ 239.144</p>
                </div>
                <button class="btn primary pay-btn" type="button">Pagar</button>
              </div>
            </article>

            <article class="card table-card right is-back" id="tableBack" aria-hidden="true" tabindex="0">
              <span class="swap-hint">Click para ver</span>
              <div class="table-caption">
                <h2>Resumen de gastos <span class="muted">(en fondo)</span></h2>
                <span class="chip">Semana 04</span>
              </div>
              <table class="table">
                <thead>
                  <tr>
                    <th>Fecha</th>
                    <th>Proveedor</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>2026-01-24</td>
                    <td>Hosting y nube</td>
                    <td>$ 220.000</td>
                  </tr>
                  <tr>
                    <td>2026-01-23</td>
                    <td>Logistica externa</td>
                    <td>$ 140.650</td>
                  </tr>
                  <tr>
                    <td>2026-01-22</td>
                    <td>Licencias SaaS</td>
                    <td>$ 88.300</td>
                  </tr>
                  <tr>
                    <td>2026-01-21</td>
                    <td>Campanas Ads</td>
                    <td>$ 64.980</td>
                  </tr>
                </tbody>
              </table>
            </article>
          </section>

          <div class="section-sep" role="separator" aria-hidden="true"></div>

          <article class="card kpi">
            <div class="row">
              <p class="label">Ingresos Mensual</p>
              <span class="chip">Enero</span>
            </div>
            <p class="value">3.220.540</p>
            <div class="bar" aria-hidden="true"><span style="--w: 10%"></span></div> <!-- barra azul -->
          </article>

          <article class="card kpi">
            <div class="row">
              <p class="label">Gasto Mensual</p>
              <span class="chip">Enero</span>
            </div>
            <p class="value">2.174.980</p>
            <div class="bar" aria-hidden="true"><span style="--w: 10%"></span></div> <!-- barra azul -->
          </article>

          <article class="card kpi">
            <div class="row">
              <p class="label">Ingreso Anual</p>
              <span class="chip">2026</span>
            </div>
            <p class="value">3.220.540</p>
            <div class="bar" aria-hidden="true"><span style="--w: 100%"></span></div>
          </article>

          <article class="card kpi">
            <div class="row">
              <p class="label">Gasto Anual</p>
              <span class="chip">2026</span>
            </div>
            <p class="value">2.174.980</p>
            <div class="bar" aria-hidden="true"><span style="--w: 100%"></span></div>
          </article>

          <!-- Wide: table -->
          <section class="card wide" aria-label="Transacciones recientes">
            <h2>Transacciones recientes <span class="muted">(demo)</span></h2>
            <table class="table" aria-describedby="tablaInfo">
              <caption id="tablaInfo" class="muted" style="caption-side: bottom; padding: 10px 4px 0; font-size: 12px;">
                Datos de ejemplo. Conectable a API/BD en la siguiente iteración.
              </caption>
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>Razon Social</th>
                  <th>Monto Total</th>
                </tr>
              </thead>
              <tbody id="txBody">
                <tr>
                  <td>2026-01-24</td>
                  <td>Banco del estado de chile</td>
                  <td>$ 1.280.000</td>
                </tr>
                <tr>
                  <td>2026-01-23</td>
                  <td>Blue Express S.A</td>
                  <td>$ 320.450</td>
                </tr>
                <tr>
                  <td>2026-01-22</td>
                  <td>Starken Spa</td>
                  <td>$ 89.990</td>

                </tr>
                <tr>
                  <td>2026-01-21</td>
                  <td>Univercidad de Chile</td>
                  <td>$ 1.250.000</td>
                </tr>
              </tbody>
            </table>
          </section>

          <!-- Sidewide: activity -->
          <aside class="card sidewide" aria-label="Actividad y auditoría">
            <h2>Actividad y auditoría <span class="muted">(últimas 24h)</span></h2>
            <div class="activity" id="activity">
              <div class="item">
                <div class="avatar" aria-hidden="true">A</div>
                <div class="txt">
                  <b>Actualización de parámetros</b>
                  <span>Se modificó umbral de alerta de conciliación.</span>
                </div>
                <div class="time">hace 15m</div>
              </div>
              <div class="item">
                <div class="avatar" aria-hidden="true">B</div>
                <div class="txt">
                  <b>Nuevo registro</b>
                  <span>Se creó movimiento “Ingreso / Documento 10392”.</span>
                </div>
                <div class="time">hace 1h</div>
              </div>
              <div class="item">
                <div class="avatar" aria-hidden="true">S</div>
                <div class="txt">
                  <b>Sincronización</b>
                  <span>Se ejecutó job programado sin incidencias.</span>
                </div>
                <div class="time">hace 4h</div>
              </div>
            </div>
          </aside>
        </section>

    </div>
  </main>

  <script>
    // Filtro simple de tabla (demo)
    const q = document.getElementById('q');
    q.addEventListener('input', () => {
      const term = q.value.toLowerCase().trim();
      document.querySelectorAll('#txBody tr').forEach(tr => {
        tr.style.display = tr.innerText.toLowerCase().includes(term) ? '' : 'none';
      });
    });

    // “Modo” (demo): invierte el fondo base (sin cambiar colores manuales)
    document.getElementById('themeBtn').addEventListener('click', () => {
      document.body.classList.toggle('alt');
      if(document.body.classList.contains('alt')){
        document.documentElement.style.setProperty('--bg', '#07090f');
        document.documentElement.style.setProperty('--bg2', '#10121a');
      } else {
        document.documentElement.style.setProperty('--bg', '#0b1020');
        document.documentElement.style.setProperty('--bg2', '#0a1633');
      }
    });

    // Carrusel de tablas (swap al hacer click en la de atras)
    const tableCarousel = document.getElementById('tableCarousel');
    let tableFront = document.getElementById('tableFront');
    let tableBack = document.getElementById('tableBack');
    let swapping = false;

    function swapTables(){
      if(swapping || !tableFront || !tableBack) return;
      swapping = true;

      tableFront.classList.remove('is-front');
      tableFront.classList.add('is-back');
      tableFront.setAttribute('aria-hidden', 'true');
      tableFront.setAttribute('tabindex', '0');

      tableBack.classList.remove('is-back');
      tableBack.classList.add('is-front');
      tableBack.removeAttribute('aria-hidden');
      tableBack.removeAttribute('tabindex');

      const temp = tableFront;
      tableFront = tableBack;
      tableBack = temp;
      swapping = false;
    }

    tableCarousel?.addEventListener('click', (e) => {
      const backCard = e.target.closest('.table-card.is-back');
      if(backCard) swapTables();
    });

    tableCarousel?.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' '){
        const backCard = e.target.closest('.table-card.is-back');
        if(backCard){
          e.preventDefault();
          swapTables();
        }
      }
    });

    // Aparicion progresiva
    const revealItems = document.querySelectorAll('.topbar, .card');
    revealItems.forEach((el, i) => {
      el.classList.add('reveal');
      el.style.transitionDelay = `${i * 80}ms`;
    });
    requestAnimationFrame(() => {
      revealItems.forEach(el => el.classList.add('is-visible'));
    });

  </script>
</body>
</html>
